{% comment %}
  Product Reviews Section
  Integration with Judge.me, Yotpo, or Stamped.io
{% endcomment %}

<section class="product-reviews-section" id="reviews">
  <div class="container">
    <h2 class="section-title">The reviews are in!</h2>
    
    {% comment %} Judge.me Integration {% endcomment %}
    {% if shop.metafields.judgeme %}
      <div id="judgeme_product_reviews" data-product-id="{{ product.id }}"></div>
    {% endif %}
    
    {% comment %} Yotpo Integration {% endcomment %}
    {% if shop.metafields.yotpo %}
      <div class="yotpo yotpo-main-widget" 
           data-product-id="{{ product.id }}"
           data-name="{{ product.title | escape }}"
           data-url="{{ shop.url }}{{ product.url }}"
           data-image-url="{{ product.featured_image | image_url: width: 200 }}">
      </div>
    {% endif %}
    
    {% comment %} Stamped.io Integration {% endcomment %}
    {% if shop.metafields.stamped %}
      <div id="stamped-main-widget" 
           data-product-id="{{ product.id }}"
           data-product-sku="{{ product.selected_or_first_available_variant.sku }}"
           data-product-title="{{ product.title | escape }}"
           data-product-type="{{ product.type }}"
           data-product-vendor="{{ product.vendor }}">
      </div>
    {% endif %}
    
    {% comment %} Fallback: Custom reviews if no app is installed {% endcomment %}
    {% unless shop.metafields.judgeme or shop.metafields.yotpo or shop.metafields.stamped %}
      <div class="reviews-fallback">
        <p>Reviews coming soon! Be the first to review this product.</p>
        <a href="{{ product.url }}#write-review" class="btn-primary">Write a Review</a>
      </div>
    {% endunless %}
  </div>
</section>

<style>
.product-reviews-section {
  padding: 60px 0;
  background: #f9f9f9;
}

.reviews-fallback {
  text-align: center;
  padding: 40px;
}
</style>

