{% comment %}
  Products Page - New Layout with Subscription, Bundles, and Singles
  Handle: products
  Layout: Hero → Subscription Block → Bundles → Singles
{% endcomment %}

<!-- Hero Banner -->
<section class="products-hero-banner">
    <div class="container">
        <div class="products-hero-content fade-in">
            <span class="products-hero-eyebrow">Products</span>
            <h1 class="products-hero-title">Wellness laundry, your way.</h1>
            <p class="products-hero-subtitle">
                Rose quartz micro‑crystal–infused detergent Paks® in two formulas—scented or fragrance-free.
            </p>
            <p class="products-hero-offer">
                Free shipping at $75+ • Save more with bundles & subscription
            </p>
        </div>
    </div>
</section>

<!-- Video Section (Optional - can be removed if not needed) -->
<section class="products-video-section">
    <div class="container">
        <div class="products-video-wrapper">
            <video class="products-video" autoplay muted loop playsinline preload="auto" webkit-playsinline>
                <source src="{{ 'video_start.mp4' | file_url }}" type="video/mp4">
            </video>
            <div class="products-video-overlay"></div>
        </div>
    </div>
</section>

<!-- Subscription Block (BEST VALUE) -->
{% render 'products-subscription-block' %}

<!-- Bundles Section -->
{% section 'products-bundles' %}

<!-- Singles Section -->
<section class="products-singles-section" id="singles-section">
    <div class="container">
        <div class="singles-section-header">
            <h2 class="singles-section-title">Shop Singles</h2>
        </div>
        
        {% comment %} Get products from collection {% endcomment %}
        {% assign products_collection = collections.all %}
        {% if collections.featured %}
            {% assign products_collection = collections.featured %}
        {% endif %}
        
        {% comment %} Get specific products by handle {% endcomment %}
        {% assign citrus_product = all_products['citrus-flower-blossom'] %}
        {% assign fragrance_product = all_products['dye-scent-free'] %}
        
        <div class="singles-grid">
            {% comment %} Show Citrus Flower Blossom {% endcomment %}
            {% if citrus_product %}
                {% render 'product-single-card', product: citrus_product %}
            {% endif %}
            
            {% comment %} Show Dye & Scent Free {% endcomment %}
            {% if fragrance_product %}
                {% render 'product-single-card', product: fragrance_product %}
            {% endif %}
            
            {% comment %} Fallback: Show products from collection if specific products not found {% endcomment %}
            {% unless citrus_product and fragrance_product %}
                {% for product in products_collection.products limit: 2 %}
                    {% unless product.handle == 'master-case' or product.tags contains 'wholesale' or product.tags contains 'master-case' %}
                        {% render 'product-single-card', product: product %}
                    {% endunless %}
                {% endfor %}
            {% endunless %}
        </div>
    </div>
</section>

<!-- Benefits Section (Keep existing) -->
<section class="products-benefits-section">
    <div class="container">
        <h2 class="benefits-section-title">Why Choose Love Paks</h2>
        <div class="benefits-grid-enhanced">
            <div class="benefit-card-enhanced fade-in">
                <div class="benefit-icon-wrapper">
                    <img src="{{ 'icono-6.png' | file_img_url: '128x' }}" 
                         alt="Eco Friendly" 
                         class="benefit-icon-enhanced"
                         loading="lazy"
                         width="80"
                         height="80">
                </div>
                <h3 class="benefit-title-enhanced">Eco-Friendly Packaging</h3>
                <p class="benefit-description-enhanced">Biodegradable packaging that's kind to our planet.</p>
            </div>
            <div class="benefit-card-enhanced fade-in">
                <div class="benefit-icon-wrapper">
                    <img src="{{ 'icono-5.png' | file_img_url: '128x' }}" 
                         alt="Stain Removal" 
                         class="benefit-icon-enhanced"
                         loading="lazy"
                         width="80"
                         height="80">
                </div>
                <h3 class="benefit-title-enhanced">Cleans Stubborn Stains</h3>
                <p class="benefit-description-enhanced">Powerful patented formula proven to remove the toughest stains.</p>
            </div>
            <div class="benefit-card-enhanced fade-in">
                <div class="benefit-icon-wrapper">
                    <img src="{{ 'icono-4.png' | file_img_url: '128x' }}" 
                         alt="Rose Quartz" 
                         class="benefit-icon-enhanced"
                         loading="lazy"
                         width="80"
                         height="80">
                </div>
                <h3 class="benefit-title-enhanced">Contains Rose Quartz</h3>
                <p class="benefit-description-enhanced">Microcrystals align your heart chakra and enhance your aura.</p>
            </div>
            <div class="benefit-card-enhanced fade-in">
                <div class="benefit-icon-wrapper">
                    <img src="{{ 'icono-3.png' | file_img_url: '128x' }}" 
                         alt="Cold Water" 
                         class="benefit-icon-enhanced"
                         loading="lazy"
                         width="80"
                         height="80">
                </div>
                <h3 class="benefit-title-enhanced">Works in Cold Water</h3>
                <p class="benefit-description-enhanced">Effective in cold water, saving energy and protecting fabrics.</p>
            </div>
        </div>
    </div>
</section>

<!-- Load JavaScript -->
<script src="{{ 'bundle-cart.js' | asset_url }}" defer></script>
<script src="{{ 'products-page.js' | asset_url }}" defer></script>

<style>
/* Products Page Hero Banner */
.products-hero-banner {
    background: linear-gradient(135deg, var(--primary-pink, #ec008c) 0%, var(--burgundy, #8b1538) 100%);
    padding: clamp(60px, 8vw, 120px) var(--spacing-md, 20px);
    text-align: center;
    color: var(--white, #ffffff);
    position: relative;
    overflow: hidden;
}

.products-hero-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('{{ "LOVE_1.png" | file_img_url: "master" }}') center/cover;
    opacity: 0.05;
    pointer-events: none;
}

.products-hero-content {
    position: relative;
    z-index: 1;
    max-width: 900px;
    margin: 0 auto;
}

.products-hero-eyebrow {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 2px;
    opacity: 0.9;
    margin-bottom: var(--spacing-sm, 12px);
}

.products-hero-title {
    font-family: 'Montserrat', sans-serif;
    font-size: clamp(2.5rem, 6vw, 4rem);
    font-weight: 800;
    margin-bottom: var(--spacing-md, 16px);
    color: var(--white, #ffffff);
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    line-height: 1.2;
}

.products-hero-subtitle {
    font-size: clamp(1.125rem, 2.5vw, 1.5rem);
    opacity: 0.95;
    font-weight: 400;
    line-height: 1.6;
    margin-bottom: var(--spacing-md, 16px);
}

.products-hero-offer {
    font-size: clamp(0.875rem, 2vw, 1rem);
    opacity: 0.85;
    font-weight: 500;
    margin-top: var(--spacing-lg, 24px);
    padding-top: var(--spacing-md, 16px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
}

/* Video Section */
.products-video-section {
    padding: 0;
    background: var(--off-white, #f8f9fa);
}

.products-video-wrapper {
    position: relative;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background: var(--light-gray, #e0e0e0);
}

.products-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.products-video-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.1) 100%);
    pointer-events: none;
}

/* Singles Section */
.products-singles-section {
    padding: var(--spacing-xxl, 60px) var(--spacing-md, 20px);
    background: var(--white, #ffffff);
}

.singles-section-header {
    text-align: center;
    margin-bottom: var(--spacing-xl, 40px);
}

.singles-section-title {
    font-family: 'Montserrat', sans-serif;
    font-size: clamp(2rem, 5vw, 2.5rem);
    font-weight: 700;
    color: var(--text-dark, #1a1a1a);
    margin: 0;
}

.singles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-xl, 40px);
    max-width: 1000px;
    margin: 0 auto;
}

/* Benefits Section */
.products-benefits-section {
    padding: var(--spacing-xxl, 60px) var(--spacing-md, 20px);
    background: var(--off-white, #f8f9fa);
}

.benefits-section-title {
    font-family: 'Montserrat', sans-serif;
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
    text-align: center;
    color: var(--text-dark, #1a1a1a);
    margin-bottom: var(--spacing-xl, 40px);
}

.benefits-grid-enhanced {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-lg, 24px);
    max-width: 1200px;
    margin: 0 auto;
}

.benefit-card-enhanced {
    background: var(--white, #ffffff);
    padding: var(--spacing-lg, 24px);
    border-radius: var(--radius-lg, 16px);
    text-align: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    transition: transform var(--transition-base, 0.3s), box-shadow var(--transition-base, 0.3s);
}

.benefit-card-enhanced:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.benefit-icon-wrapper {
    margin-bottom: var(--spacing-md, 16px);
    display: flex;
    justify-content: center;
}

.benefit-icon-enhanced {
    width: 80px;
    height: 80px;
    object-fit: contain;
}

.benefit-title-enhanced {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-dark, #1a1a1a);
    margin-bottom: var(--spacing-xs, 8px);
}

.benefit-description-enhanced {
    font-size: 0.9375rem;
    color: var(--text-gray, #666);
    line-height: 1.6;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .products-hero-banner {
        padding: clamp(40px, 6vw, 80px) var(--spacing-md, 20px);
    }
    
    .products-singles-section {
        padding: var(--spacing-xl, 40px) var(--spacing-md, 20px);
    }
    
    .singles-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-lg, 24px);
    }
    
    .benefits-grid-enhanced {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md, 16px);
    }
    
    .benefit-icon-enhanced {
        width: 64px;
        height: 64px;
    }
    
    .products-video-wrapper {
        aspect-ratio: 4 / 3;
    }
}

@media (max-width: 480px) {
    .benefits-grid-enhanced {
        grid-template-columns: 1fr;
    }
}
</style>
